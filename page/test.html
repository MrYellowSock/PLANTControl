<!DOCTYPE html> <html> <head> <style> div{ margin: 5px; text-align: center; } input[type="range"]{ writing-mode: bt-lr; /* IE / -webkit-appearance: slider-vertical; / WebKit */ width: 25px; background:red; } body{ background-color:black; } p{ color:greenyellow; font-family:monospace; font-size:smaller; } legend{ color:hotpink } </style> </head> <body> <p style="color:snow" id="time"></p> <fieldset id="am"> <legend>AM</legend> </fieldset> <fieldset id="pm"> <legend>PM</legend> </fieldset> <fieldset id="cool"> <legend>fan settings</legend> </fieldset> <script> function slided(target){ var pp = target.parentElement.getElementsByTagName('p')[0] pp.innerText = target.value; pp.style.color=`rgb(255, ${140+(+target.value)}, ${target.value*2})` } function slided2(target){ var pp = target.parentElement.getElementsByTagName('p')[0] pp.innerText = target.value+" *C"; pp.style.color=`rgb(${(+target.value+100)}, ${+target.value+100},255)` } function update(query){ var xhr = new XMLHttpRequest(); xhr.open("GET",location.origin+query); xhr.send(); xhr.onload = ()=>{ location.reload(); } } function update_light ({id , value}){ console.log("light",id,value); update(/set?time=${id}&brightness=${value}) } function update_fan({id , value}){ console.log("temp",id,value); update(/setfan?target=${id}&temp=${value}) } var hrs = [255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,]; var curTime = "22:13:11"; var airTemp = 28.11; var airRH = 81.23; var ledTemp = -1000.00; var fanset = {led:nan,air:nan}; document.getElementById("time").innerText = TIME: ${curTime} AIR : ${airTemp} *C , RH: ${airRH} % LED : ${ledTemp} *C for(var i=0;i<24;i++){ var ranger = document.createElement("div"); var hr = (i>=12)?i-12:i; ranger.innerHTML = <div style="float: left;"> <p style="color:darkorange">50</p> <input id="${i}" oninput="slided(this)" onchange="update_light(this)" type="range" min="0" max="100" value="${hrs[i]}"/> <p >${hr}-${hr+1}</p> </div> if(i < 12){ document.getElementById('am').appendChild(ranger); } else{ document.getElementById('pm').appendChild(ranger); } } for(var targ in fanset){ var ranger = document.createElement("div"); ranger.innerHTML = <div style="float: left;"> <p style="color:darkorange">50</p> <input style="height:200px;" id="${targ}" oninput="slided2(this)" onchange="update_fan(this)" type="range" step="0.1" min="10" max="70" value="${fanset[targ]}"/> <p >${targ}</p> </div>; document.getElementById('cool').append(ranger); } for(var s of document.querySelectorAll('input[type="range"]')){ s.oninput(); } </script> </body> </html>
